<template>
  <div class="home-page">
    <!-- è½®æ’­å›¾åŒºåŸŸ -->
    <section class="hero-section">
      <Swiper
        :items="carouselItems"
        height="600px"
        :autoplay="true"
        :interval="5000"
        @change="onCarouselChange"
      />
    </section>

    <!-- å…¬å¸ç®€ä»‹åŒºåŸŸ -->
    <section class="py-16 bg-gray-50">
      <div class="container">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          <div class="space-y-6">
            <h2 class="section-title">å…³äºæˆ‘ä»¬</h2>
            <p class="text-gray-600 text-lg leading-relaxed">
              æˆ‘ä»¬æ˜¯ä¸€å®¶ä¸“ä¸šçš„ä¼ä¸šæœåŠ¡æä¾›å•†ï¼Œè‡´åŠ›äºä¸ºå®¢æˆ·æä¾›é«˜è´¨é‡çš„æ•°å­—åŒ–è§£å†³æ–¹æ¡ˆã€‚
              æ‹¥æœ‰å¤šå¹´è¡Œä¸šç»éªŒï¼ŒæœåŠ¡è¿‡æ•°ç™¾å®¶ä¼ä¸šå®¢æˆ·ï¼Œå¸®åŠ©ä»–ä»¬å®ç°æ•°å­—åŒ–è½¬å‹å‡çº§ã€‚
            </p>
            <div class="grid grid-cols-2 gap-6">
              <div class="text-center">
                <div class="text-3xl font-bold text-blue-600">{{ stats.experience }}+</div>
                <div class="text-gray-600 mt-1">å¹´ç»éªŒ</div>
              </div>
              <div class="text-center">
                <div class="text-3xl font-bold text-blue-600">{{ stats.projects }}+</div>
                <div class="text-gray-600 mt-1">é¡¹ç›®æ¡ˆä¾‹</div>
              </div>
              <div class="text-center">
                <div class="text-3xl font-bold text-blue-600">{{ stats.clients }}+</div>
                <div class="text-gray-600 mt-1">åˆä½œå®¢æˆ·</div>
              </div>
              <div class="text-center">
                <div class="text-3xl font-bold text-blue-600">{{ stats.satisfaction }}%</div>
                <div class="text-gray-600 mt-1">å®¢æˆ·æ»¡æ„åº¦</div>
              </div>
            </div>
            <div class="pt-4">
              <router-link to="/about" class="btn btn-primary">
                äº†è§£æ›´å¤š
              </router-link>
            </div>
          </div>
          <div class="relative">
            <img
              :src="Images.about.officeEnvironment"
              alt="å…¬å¸åŠå…¬ç¯å¢ƒ"
              class="rounded-lg shadow-lg w-full h-auto"
            />
            <div class="absolute inset-0 bg-blue-600 bg-opacity-10 rounded-lg"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- æ ¸å¿ƒä¸šåŠ¡åŒºåŸŸ -->
    <section class="py-16">
      <div class="container">
        <div class="text-center mb-12">
          <h2 class="section-title">æ ¸å¿ƒä¸šåŠ¡</h2>
          <p class="text-gray-600 text-lg max-w-2xl mx-auto">
            æä¾›å…¨æ–¹ä½çš„ä¼ä¸šæœåŠ¡è§£å†³æ–¹æ¡ˆï¼ŒåŠ©åŠ›ä¼ä¸šæ•°å­—åŒ–è½¬å‹
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div
            v-for="service in services"
            :key="service.id"
            class="card hover:shadow-lg transition-shadow duration-300 group cursor-pointer"
            @click="$router.push('/business')"
          >
            <div class="card-body text-center p-8">
              <div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors duration-300">
                <span class="text-2xl">{{ service.icon }}</span>
              </div>
              <h3 class="text-xl font-semibold mb-3">{{ service.title }}</h3>
              <p class="text-gray-600 leading-relaxed">{{ service.description }}</p>
            </div>
          </div>
        </div>
        <div class="text-center mt-10">
          <router-link to="/business" class="btn btn-outline">
            æŸ¥çœ‹å…¨éƒ¨ä¸šåŠ¡
          </router-link>
        </div>
      </div>
    </section>

    <!-- æ–°é—»åŠ¨æ€åŒºåŸŸ -->
    <section class="py-16 bg-gray-50">
      <div class="container">
        <div class="flex items-center justify-between mb-12">
          <div>
            <h2 class="section-title">æ–°é—»åŠ¨æ€</h2>
            <p class="text-gray-600">äº†è§£æœ€æ–°çš„è¡Œä¸šèµ„è®¯å’Œå…¬å¸åŠ¨æ€</p>
          </div>
          <router-link to="/news" class="btn btn-outline">
            æŸ¥çœ‹æ›´å¤š
          </router-link>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <article
            v-for="article in featuredNews"
            :key="article.id"
            class="card hover:shadow-lg transition-shadow duration-300 cursor-pointer"
            @click="$router.push(`/news/${article.id}`)"
          >
            <div class="aspect-w-16 aspect-h-9">
              <img
                :src="article.imageUrl || Images.news.awardNews"
                :alt="article.title"
                class="w-full h-48 object-cover rounded-t-lg"
              />
            </div>
            <div class="card-body">
              <div class="flex items-center justify-between mb-2">
                <span class="tag tag-primary">{{ getCategoryLabel(article.category) }}</span>
                <time class="text-sm text-gray-500">{{ formatDate(article.publishDate) }}</time>
              </div>
              <h3 class="text-lg font-semibold mb-2 text-ellipsis-2">{{ article.title }}</h3>
              <p class="text-gray-600 text-sm text-ellipsis-3">{{ article.summary }}</p>
              <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-100">
                <span class="text-sm text-gray-500">{{ article.author }}</span>
                <span class="text-sm text-gray-500">{{ article.readCount }} é˜…è¯»</span>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- CTAåŒºåŸŸ -->
    <section class="py-16 bg-gradient-primary text-white">
      <div class="container text-center">
        <h2 class="text-3xl font-bold mb-4">å‡†å¤‡å¼€å§‹æ‚¨çš„é¡¹ç›®äº†å—ï¼Ÿ</h2>
        <p class="text-xl mb-8 opacity-90">
          æˆ‘ä»¬çš„ä¸“ä¸šå›¢é˜Ÿéšæ—¶ä¸ºæ‚¨æä¾›å’¨è¯¢æœåŠ¡
        </p>
        <div class="space-x-4">
          <router-link to="/consult" class="btn bg-white text-blue-600 hover:bg-gray-100">
            å…è´¹å’¨è¯¢
          </router-link>
          <router-link to="/contact" class="btn bg-white text-blue-600 hover:bg-gray-100">
            è”ç³»æˆ‘ä»¬
          </router-link>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';
import Swiper from '@/components/Swiper.vue';
import type { CarouselItem } from '@/types/common';
import type { NewsArticle, NewsCategory } from '@/types/news';
import type { BusinessService } from '@/types/business';
import { formatDate } from '@/utils/formatDate';
import { Images } from '@/assets/images';

// é¡µé¢æ•°æ®
const carouselItems = ref<CarouselItem[]>([
  {
    id: '1',
    title: 'ä¸“ä¸šä¼ä¸šæœåŠ¡è§£å†³æ–¹æ¡ˆ',
    subtitle: 'åŠ©åŠ›ä¼ä¸šæ•°å­—åŒ–è½¬å‹å‡çº§',
    description: 'æä¾›å…¨æ–¹ä½çš„æŠ€æœ¯æœåŠ¡ï¼Œè®©æ‚¨çš„ä¸šåŠ¡æ›´åŠ é«˜æ•ˆ',
    imageUrl: Images.hero.carousel1,
    linkUrl: '/business',
    buttonText: 'äº†è§£æœåŠ¡',
    order: 1,
    isActive: true
  },
  {
    id: '2',
    title: 'åˆ›æ–°æŠ€æœ¯å¼•é¢†æœªæ¥',
    subtitle: 'ç”¨æŠ€æœ¯åˆ›é€ ä»·å€¼',
    description: 'å‰æ²¿æŠ€æœ¯ä¸å®ç”¨è§£å†³æ–¹æ¡ˆçš„å®Œç¾ç»“åˆ',
    imageUrl: Images.hero.carousel2,
    linkUrl: '/about',
    buttonText: 'å…³äºæˆ‘ä»¬',
    order: 2,
    isActive: true
  },
  {
    id: '3',
    title: 'å®¢æˆ·æˆåŠŸæ˜¯æˆ‘ä»¬çš„ä½¿å‘½',
    subtitle: 'ä¸“ä¸šå›¢é˜Ÿï¼Œè´´å¿ƒæœåŠ¡',
    description: '7x24å°æ—¶æŠ€æœ¯æ”¯æŒï¼Œç¡®ä¿æ‚¨çš„ä¸šåŠ¡ç¨³å®šè¿è¡Œ',
    imageUrl: Images.hero.carousel3,
    linkUrl: '/contact',
    buttonText: 'è”ç³»æˆ‘ä»¬',
    order: 3,
    isActive: true
  }
]);

const stats = ref({
  experience: 10,
  projects: 500,
  clients: 200,
  satisfaction: 99
});

const services = ref<BusinessService[]>([
  {
    id: '1',
    title: 'ä¼ä¸šå®˜ç½‘å»ºè®¾',
    description: 'ä¸“ä¸šçš„ä¼ä¸šå®˜ç½‘è®¾è®¡ä¸å¼€å‘ï¼Œæå‡ä¼ä¸šå½¢è±¡å’Œå“ç‰Œä»·å€¼',
    detailContent: '',
    features: [],
    advantages: [],
    imageUrl: '',
    category: 'development',
    order: 1,
    isActive: true,
    icon: 'ğŸŒ'
  },
  {
    id: '2',
    title: 'ç³»ç»Ÿé›†æˆæœåŠ¡',
    description: 'ä¸ºä¼ä¸šæä¾›å®Œæ•´çš„ç³»ç»Ÿé›†æˆè§£å†³æ–¹æ¡ˆï¼Œä¼˜åŒ–ä¸šåŠ¡æµç¨‹',
    detailContent: '',
    features: [],
    advantages: [],
    imageUrl: '',
    category: 'consulting',
    order: 2,
    isActive: true,
    icon: 'âš™ï¸'
  },
  {
    id: '3',
    title: 'æŠ€æœ¯å’¨è¯¢æœåŠ¡',
    description: 'ä¸“ä¸šçš„æŠ€æœ¯å’¨è¯¢å›¢é˜Ÿï¼Œä¸ºæ‚¨çš„æŠ€æœ¯å†³ç­–æä¾›ä¸“ä¸šå»ºè®®',
    detailContent: '',
    features: [],
    advantages: [],
    imageUrl: '',
    category: 'consulting',
    order: 3,
    isActive: true,
    icon: 'ğŸ’¡'
  },
  {
    id: '4',
    title: 'è¿ç»´æ”¯æŒæœåŠ¡',
    description: '7x24å°æ—¶è¿ç»´ç›‘æ§ï¼Œç¡®ä¿æ‚¨çš„ç³»ç»Ÿç¨³å®šé«˜æ•ˆè¿è¡Œ',
    detailContent: '',
    features: [],
    advantages: [],
    imageUrl: '',
    category: 'maintenance',
    order: 4,
    isActive: true,
    icon: 'ğŸ› ï¸'
  },
  {
    id: '5',
    title: 'ç§»åŠ¨åº”ç”¨å¼€å‘',
    description: 'ä¸“ä¸šçš„ç§»åŠ¨åº”ç”¨å¼€å‘å›¢é˜Ÿï¼Œæ‰“é€ ä¼˜è´¨çš„ç§»åŠ¨ç«¯ä½“éªŒ',
    detailContent: '',
    features: [],
    advantages: [],
    imageUrl: '',
    category: 'development',
    order: 5,
    isActive: true,
    icon: 'ğŸ“±'
  },
  {
    id: '6',
    title: 'åŸ¹è®­æœåŠ¡',
    description: 'æä¾›ä¸“ä¸šçš„æŠ€æœ¯åŸ¹è®­æœåŠ¡ï¼Œæå‡å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›',
    detailContent: '',
    features: [],
    advantages: [],
    imageUrl: '',
    category: 'training',
    order: 6,
    isActive: true,
    icon: 'ğŸ“š'
  }
]);

const featuredNews = ref<NewsArticle[]>([
  {
    id: '1',
    title: 'å…¬å¸è£è·"2024å¹´åº¦æœ€ä½³ä¼ä¸šæœåŠ¡å¥–"',
    summary: 'åœ¨æ¿€çƒˆçš„è¡Œä¸šç«äº‰ä¸­ï¼Œæˆ‘ä»¬å‡­å€Ÿå“è¶Šçš„æœåŠ¡è´¨é‡å’Œå®¢æˆ·æ»¡æ„åº¦è·å¾—äº†è¿™ä¸€æ®Šè£',
    content: '',
    author: 'å¼ ä¸‰',
    publishDate: '2024-03-15T10:00:00Z',
    category: 'company',
    tags: ['å¥–é¡¹', 'ä¼ä¸šè£èª‰'],
    imageUrl: Images.news.awardNews,
    readCount: 1250,
    featured: true
  },
  {
    id: '2',
    title: 'æ–°ä¸€ä»£ä¼ä¸šæ•°å­—åŒ–è½¬å‹è§£å†³æ–¹æ¡ˆå‘å¸ƒ',
    summary: 'åŸºäºæœ€æ–°æŠ€æœ¯æ ˆæ‰“é€ çš„ä¼ä¸šæ•°å­—åŒ–è½¬å‹è§£å†³æ–¹æ¡ˆï¼ŒåŠ©åŠ›ä¼ä¸šå¿«é€Ÿå®ç°æ•°å­—åŒ–å‡çº§',
    content: '',
    author: 'æå››',
    publishDate: '2024-03-10T14:30:00Z',
    category: 'product',
    tags: ['äº§å“å‘å¸ƒ', 'æ•°å­—åŒ–è½¬å‹'],
    imageUrl: Images.news.productNews,
    readCount: 980,
    featured: true
  },
  {
    id: '3',
    title: 'è¡Œä¸šæŠ€æœ¯å‘å±•è¶‹åŠ¿åˆ†ææŠ¥å‘Š',
    summary: 'æ·±åº¦åˆ†æå½“å‰æŠ€æœ¯å‘å±•è¶‹åŠ¿ï¼Œä¸ºä¼ä¸šæŠ€æœ¯å†³ç­–æä¾›ä¸“ä¸šå‚è€ƒ',
    content: '',
    author: 'ç‹äº”',
    publishDate: '2024-03-05T09:15:00Z',
    category: 'industry',
    tags: ['è¡Œä¸šåˆ†æ', 'æŠ€æœ¯è¶‹åŠ¿'],
    imageUrl: Images.news.industryNews,
    readCount: 756,
    featured: true
  }
]);

// æ–¹æ³•
const onCarouselChange = (index: number) => {
  console.log('è½®æ’­å›¾åˆ‡æ¢åˆ°ç¬¬', index + 1, 'å¼ ');
};

const getCategoryLabel = (category: NewsCategory): string => {
  const labels = {
    company: 'å…¬å¸åŠ¨æ€',
    industry: 'è¡Œä¸šèµ„è®¯',
    product: 'äº§å“æ›´æ–°',
    event: 'æ´»åŠ¨å…¬å‘Š'
  };
  return labels[category] || 'å…¶ä»–';
};

// ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  // è¿™é‡Œå¯ä»¥æ·»åŠ é¡µé¢åŠ è½½æ—¶çš„æ•°æ®è·å–é€»è¾‘
  console.log('é¦–é¡µåŠ è½½å®Œæˆ');
});
</script>

<style scoped>
/* è‹±é›„åŒºåŸŸæ ·å¼ */
.hero-section {
  position: relative;
  overflow: hidden;
}

/* ç»Ÿè®¡æ•°å­—åŠ¨ç”» */
.stats-number {
  animation: countUp 2s ease-out;
}

@keyframes countUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* æœåŠ¡å¡ç‰‡æ‚¬åœæ•ˆæœ */
.service-card {
  transition: all 0.3s ease;
}

.service-card:hover {
  transform: translateY(-5px);
}

/* æ–°é—»å¡ç‰‡æ ·å¼ */
.news-card {
  transition: all 0.3s ease;
}

.news-card:hover {
  transform: translateY(-2px);
}

/* å“åº”å¼é€‚é… */
@media (max-width: 768px) {
  .section-title {
    font-size: 1.75rem;
  }
  
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
</style>